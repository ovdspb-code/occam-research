/* ============================================
   CRN Theme v3.0 â€” Occam Research Redesign
   Instrument Serif + DM Sans + JetBrains Mono
   Scientific blue palette, editorial tone
   ============================================ */

/* --- Fluid Type Scale --- */
:root {
  --text-xs:   clamp(0.75rem,  0.7rem  + 0.25vw, 0.8125rem);
  --text-sm:   clamp(0.8125rem, 0.77rem + 0.25vw, 0.875rem);
  --text-base: clamp(0.9375rem, 0.88rem + 0.3vw,  1.0625rem);
  --text-lg:   clamp(1.125rem,  1rem    + 0.6vw,  1.375rem);
  --text-xl:   clamp(1.5rem,    1.1rem  + 1.2vw,  2rem);
  --text-2xl:  clamp(2rem,      1.4rem  + 2vw,    3rem);
  --text-3xl:  clamp(2.5rem,    1.2rem  + 3.5vw,  4.5rem);
}

/* --- 4px Spacing System --- */
:root {
  --space-1:  0.25rem;
  --space-2:  0.5rem;
  --space-3:  0.75rem;
  --space-4:  1rem;
  --space-5:  1.25rem;
  --space-6:  1.5rem;
  --space-8:  2rem;
  --space-10: 2.5rem;
  --space-12: 3rem;
  --space-16: 4rem;
  --space-20: 5rem;
  --space-24: 6rem;
  --space-32: 8rem;
}

/* --- Light Mode (default) --- */
:root {
  /* Surfaces */
  --bg: #fafbfd;
  --surface: #ffffff;
  --surface-alt: #f3f5f9;
  --surface-accent: #eef1ff;
  --canvas-bg: #f5f6fa;

  /* Borders */
  --border: #e0e3ec;
  --border-light: #eceef4;
  --border-focus: #2563eb;

  /* Text */
  --text: #1a1d27;
  --text-2: #5a5e6e;
  --text-3: #9196a8;
  --text-inv: #ffffff;

  /* Accent */
  --accent: #2563eb;
  --accent-hover: #1d4ed8;
  --accent-light: #eff3ff;

  /* Semantic Colors */
  --teal: #0d9488;
  --teal-light: #e6f7f5;
  --warm: #d97706;
  --warm-light: #fef7e8;
  --coral: #dc2626;
  --coral-light: #fef2f2;

  /* Chart Colors (7-point series) */
  --c0: #dc2626; --c1: #d97706; --c2: #ca8a04; --c3: #16a34a;
  --c4: #0d9488; --c5: #2563eb; --c6: #7c3aed;

  /* Role Colors (elegans/mouse specific) */
  --c-src: #2563eb; --c-tgt: #d97706; --c-int: #0d9488;
  --c-crn: #2563eb; --c-th: #dc2626; --c-ctqw: #0d9488;

  /* Layout */
  --radius: 12px;
  --radius-sm: 8px;
  --radius-lg: 16px;

  /* Shadows */
  --shadow-sm: 0 1px 3px rgba(0,0,0,.04), 0 1px 2px rgba(0,0,0,.02);
  --shadow-md: 0 4px 16px rgba(0,0,0,.06), 0 2px 4px rgba(0,0,0,.03);
  --shadow-lg: 0 12px 40px rgba(0,0,0,.08), 0 4px 12px rgba(0,0,0,.04);

  /* Typography */
  --font-display: 'Instrument Serif', Georgia, serif;
  --font-body: 'DM Sans', -apple-system, sans-serif;
  --font-head: 'Instrument Serif', Georgia, serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;

  /* Transitions */
  --ease: cubic-bezier(0.16, 1, 0.3, 1);
  --transition-fast: 180ms cubic-bezier(0.16, 1, 0.3, 1);
}

/* --- Dark Mode --- */
[data-theme="dark"] {
  --bg: #0f1117;
  --surface: #1a1d2e;
  --surface-alt: #1f2236;
  --surface-accent: #1c2044;
  --canvas-bg: #141623;

  --border: #2a2e46;
  --border-light: #232740;
  --border-focus: #60a5fa;

  --text: #e2e8f0;
  --text-2: #94a3b8;
  --text-3: #64748b;
  --text-inv: #0f1117;

  --accent: #60a5fa;
  --accent-hover: #93bbfd;
  --accent-light: #1e2a4a;

  --teal: #5eead4;
  --teal-light: #162e2b;
  --warm: #fbbf24;
  --warm-light: #2a2210;
  --coral: #f87171;
  --coral-light: #2a1515;

  --c0: #f87171; --c1: #fbbf24; --c2: #facc15; --c3: #4ade80;
  --c4: #5eead4; --c5: #60a5fa; --c6: #a78bfa;

  --c-src: #60a5fa; --c-tgt: #fbbf24; --c-int: #5eead4;
  --c-crn: #60a5fa; --c-th: #f87171; --c-ctqw: #5eead4;

  --shadow-sm: 0 1px 3px rgba(0,0,0,.2);
  --shadow-md: 0 4px 16px rgba(0,0,0,.25);
  --shadow-lg: 0 12px 40px rgba(0,0,0,.35);
}

/* System preference fallback */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --bg: #0f1117;
    --surface: #1a1d2e;
    --surface-alt: #1f2236;
    --surface-accent: #1c2044;
    --canvas-bg: #141623;
    --border: #2a2e46;
    --border-light: #232740;
    --border-focus: #60a5fa;
    --text: #e2e8f0;
    --text-2: #94a3b8;
    --text-3: #64748b;
    --text-inv: #0f1117;
    --accent: #60a5fa;
    --accent-hover: #93bbfd;
    --accent-light: #1e2a4a;
    --teal: #5eead4;
    --teal-light: #162e2b;
    --warm: #fbbf24;
    --warm-light: #2a2210;
    --coral: #f87171;
    --coral-light: #2a1515;
    --c0: #f87171; --c1: #fbbf24; --c2: #facc15; --c3: #4ade80;
    --c4: #5eead4; --c5: #60a5fa; --c6: #a78bfa;
    --c-src: #60a5fa; --c-tgt: #fbbf24; --c-int: #5eead4;
    --c-crn: #60a5fa; --c-th: #f87171; --c-ctqw: #5eead4;
    --shadow-sm: 0 1px 3px rgba(0,0,0,.2);
    --shadow-md: 0 4px 16px rgba(0,0,0,.25);
    --shadow-lg: 0 12px 40px rgba(0,0,0,.35);
  }
}

/* ============================================
   BASE RESET
   ============================================ */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  scroll-behavior: smooth;
  scroll-padding-top: var(--space-20);
}

body {
  min-height: 100dvh;
  line-height: 1.7;
  font-family: var(--font-body);
  font-size: var(--text-base);
  color: var(--text);
  background-color: var(--bg);
  transition: background-color .3s var(--ease), color .3s var(--ease);
}

img, picture, video, canvas, svg { display: block; max-width: 100%; }
input, button, textarea, select { font: inherit; color: inherit; }
h1, h2, h3, h4, h5, h6 { text-wrap: balance; line-height: 1.2; }
p, li, figcaption { text-wrap: pretty; }
button { cursor: pointer; background: none; border: none; }
a { color: var(--accent); text-decoration: none; transition: color var(--transition-fast); }
a:hover { color: var(--accent-hover); }

:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 3px;
  border-radius: var(--radius-sm);
}

::selection {
  background: rgba(37, 99, 235, 0.15);
  color: var(--text);
}

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================
   LAYOUT
   ============================================ */
.wrap {
  max-width: 1120px;
  margin: 0 auto;
  padding: 0 clamp(var(--space-5), 4vw, var(--space-8));
}

/* ============================================
   STICKY NAV
   ============================================ */
.site-header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: color-mix(in srgb, var(--bg) 85%, transparent);
  backdrop-filter: blur(16px) saturate(1.4);
  -webkit-backdrop-filter: blur(16px) saturate(1.4);
  border-bottom: 1px solid var(--border-light);
  transition: background .3s var(--ease);
}

.nav {
  padding: var(--space-4) 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.nav-brand {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  font-weight: 600;
  color: var(--text);
  font-size: var(--text-sm);
  text-decoration: none;
  letter-spacing: -0.01em;
  transition: color var(--transition-fast);
}
.nav-brand:hover { color: var(--accent); }
.nav-brand svg { width: 24px; height: 24px; flex-shrink: 0; }

.nav-right {
  display: flex;
  gap: var(--space-4);
  align-items: center;
  font-size: var(--text-xs);
}
.nav-right a {
  color: var(--text-2);
  font-weight: 500;
  transition: color var(--transition-fast);
}
.nav-right a:hover { color: var(--text); }

/* Theme Toggle */
.theme-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  color: var(--text-2);
  font-size: 1.1rem;
  line-height: 1;
  transition: all var(--transition-fast);
}
.theme-toggle:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: var(--accent-light);
}

/* ============================================
   HERO
   ============================================ */
.hero {
  padding: clamp(var(--space-12), 6vw, var(--space-20)) 0 clamp(var(--space-8), 4vw, var(--space-12));
}
.hero-center { text-align: center; }
.hero-center .hero-sub { margin-inline: auto; }

.hero-eyebrow {
  font-size: var(--text-xs);
  font-weight: 600;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--accent);
  margin-bottom: var(--space-3);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}
.hero-eyebrow .dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--teal);
  display: inline-block;
}

.hero h1 {
  font-family: var(--font-display);
  font-size: var(--text-3xl);
  font-weight: 400;
  line-height: 1.1;
  letter-spacing: -0.02em;
  margin-bottom: var(--space-4);
  color: var(--text);
}
.hero h1 em {
  font-style: italic;
  color: var(--accent);
}

.hero-sub {
  font-size: var(--text-base);
  color: var(--text-2);
  max-width: 680px;
  line-height: 1.75;
  font-weight: 400;
}

.hero-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  background: var(--accent-light);
  color: var(--accent);
  font-size: var(--text-xs);
  font-weight: 600;
  padding: var(--space-1) var(--space-4);
  border-radius: 999px;
  letter-spacing: 0.03em;
  margin-bottom: var(--space-6);
  border: 1px solid color-mix(in srgb, var(--accent) 15%, transparent);
}

/* ============================================
   INFO BOX
   ============================================ */
.info-box {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--space-6) var(--space-6);
  margin: var(--space-5) 0;
  transition: background .3s var(--ease);
}
.info-box h3 {
  font-size: var(--text-sm);
  font-weight: 600;
  margin-bottom: var(--space-2);
  font-family: var(--font-body);
}
.info-box p {
  font-size: var(--text-sm);
  color: var(--text-2);
  line-height: 1.75;
  max-width: 72ch;
}
.info-box strong { color: var(--text); font-weight: 600; }

/* ============================================
   TABS
   ============================================ */
.tabs {
  display: flex;
  gap: 2px;
  margin: var(--space-8) 0 0;
  background: var(--surface-alt);
  border-radius: 10px;
  padding: 3px;
  border: 1px solid var(--border-light);
  width: fit-content;
}
.tab-btn {
  padding: var(--space-2) var(--space-6);
  border: none;
  background: transparent;
  color: var(--text-3);
  font-family: var(--font-body);
  font-size: var(--text-xs);
  font-weight: 500;
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: all var(--transition-fast);
}
.tab-btn.active {
  background: var(--accent);
  color: #fff;
  box-shadow: var(--shadow-sm);
}
.tab-btn:hover:not(.active) {
  color: var(--text);
  background: var(--surface);
}
.tab-content { display: none; }
.tab-content.active { display: block; }

/* ============================================
   STAT GRID (premium dashboard widgets)
   ============================================ */
.stat-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-4);
  margin: var(--space-6) 0;
}
.stat-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--space-5) var(--space-5);
  transition: all var(--transition-fast);
  position: relative;
  overflow: hidden;
}
.stat-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--border-light);
  border-radius: var(--radius) var(--radius) 0 0;
}
.stat-card:nth-child(1)::before { background: var(--accent); }
.stat-card:nth-child(2)::before { background: var(--teal); }
.stat-card:nth-child(3)::before { background: var(--warm); }

.stat-card-title {
  font-size: var(--text-xs);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-weight: 600;
  color: var(--text-3);
  margin-bottom: var(--space-3);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}
.stat-card-title .dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
}

.stat-row {
  display: flex;
  justify-content: space-between;
  padding: var(--space-1) 0;
  border-bottom: 1px solid var(--border-light);
  font-size: var(--text-sm);
}
.stat-row:last-child { border-bottom: none; }
.stat-label { color: var(--text-2); }
.stat-val {
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  font-weight: 500;
  font-variant-numeric: tabular-nums;
}
.stat-val.good, .stat-val.g { color: var(--teal); }
.stat-val.warn, .stat-val.w { color: var(--warm); }
.stat-val.bad { color: var(--coral); }

/* ============================================
   VIZ / CONTROLS / CANVAS
   ============================================ */
.viz {
  margin: var(--space-8) 0;
}
.viz h2 {
  font-family: var(--font-display);
  font-size: var(--text-lg);
  font-weight: 400;
  margin-bottom: var(--space-4);
  display: flex;
  align-items: center;
  gap: var(--space-3);
}
.viz h2 .dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.controls {
  display: flex;
  gap: var(--space-4);
  flex-wrap: wrap;
  margin-bottom: var(--space-4);
  padding: var(--space-4) var(--space-5);
  background: var(--surface);
  border-radius: var(--radius);
  border: 1px solid var(--border);
  align-items: center;
  transition: background .3s var(--ease);
}
.control-group {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}
.control-group label {
  font-size: var(--text-xs);
  color: var(--text-3);
  white-space: nowrap;
  font-weight: 500;
}
.control-group select {
  background: var(--surface-alt);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: var(--space-2) var(--space-3);
  font-family: var(--font-body);
  font-size: var(--text-xs);
  cursor: pointer;
  transition: border-color var(--transition-fast);
}
.control-group select:focus {
  outline: none;
  border-color: var(--border-focus);
}
.control-group input[type=range] {
  width: 140px;
  accent-color: var(--accent);
}

.play-btn, .btn {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: var(--radius-sm);
  padding: var(--space-2) var(--space-4);
  font-family: var(--font-body);
  font-size: var(--text-xs);
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
}
.play-btn:hover, .btn:hover {
  background: var(--accent-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}
.play-btn:active, .btn:active {
  transform: translateY(0);
}
.btn.outline {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-2);
}
.btn.outline:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: var(--accent-light);
}

.time-display, .val {
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  color: var(--accent);
  min-width: 50px;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
}

canvas {
  display: block;
  width: 100%;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--canvas-bg);
  transition: background .3s var(--ease), border-color .3s var(--ease);
}

.legend {
  display: flex;
  gap: var(--space-4);
  flex-wrap: wrap;
  margin-top: var(--space-3);
  padding: var(--space-3) var(--space-4);
  background: var(--surface);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-light);
}
.legend-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--text-xs);
  color: var(--text-2);
}
.legend-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

.charts-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-4);
  margin: var(--space-5) 0;
}
.chart-box {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--space-5);
  transition: background .3s var(--ease);
}
.chart-box h3 {
  font-size: var(--text-xs);
  font-weight: 600;
  color: var(--text-3);
  margin-bottom: var(--space-3);
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.info-bar {
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  color: var(--text-3);
  padding: var(--space-2) 0;
  display: flex;
  gap: var(--space-4);
  flex-wrap: wrap;
  font-variant-numeric: tabular-nums;
}

/* ============================================
   SOURCE BOX
   ============================================ */
.source-box {
  margin: var(--space-8) 0;
  padding: var(--space-5) var(--space-6);
  background: var(--surface);
  border: 1px solid var(--border);
  border-left: 3px solid var(--accent);
  border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
  font-size: var(--text-sm);
  color: var(--text-2);
  line-height: 1.8;
}
.source-box strong { color: var(--text); font-weight: 600; }

/* ============================================
   CARDS (homepage)
   ============================================ */
.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(min(320px, 100%), 1fr));
  gap: var(--space-5);
  margin: clamp(var(--space-8), 4vw, var(--space-12)) 0;
}
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--space-6) var(--space-6);
  transition: box-shadow var(--transition-fast),
              transform var(--transition-fast),
              border-color var(--transition-fast);
  cursor: pointer;
  color: inherit;
  display: block;
  position: relative;
}
.card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-3px);
  border-color: color-mix(in srgb, var(--accent) 25%, var(--border));
}
.card:active { transform: translateY(-1px); }

.card-icon {
  width: 48px;
  height: 48px;
  border-radius: var(--radius);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  margin-bottom: var(--space-4);
}
.card h3 {
  font-family: var(--font-display);
  font-size: var(--text-lg);
  font-weight: 400;
  margin-bottom: var(--space-2);
  line-height: 1.3;
}
.card p {
  font-size: var(--text-sm);
  color: var(--text-2);
  line-height: 1.7;
  margin-bottom: var(--space-4);
  max-width: 56ch;
}
.card-meta {
  display: flex;
  gap: var(--space-2);
  flex-wrap: wrap;
}
.tag {
  font-size: 0.6875rem;
  font-weight: 500;
  padding: 2px var(--space-3);
  border-radius: 5px;
  background: var(--surface-alt);
  color: var(--text-3);
  border: 1px solid var(--border-light);
  font-family: var(--font-mono);
  letter-spacing: 0.01em;
}
.card-date {
  font-size: 0.6875rem;
  color: var(--text-3);
  font-family: var(--font-mono);
  margin-top: var(--space-3);
  font-variant-numeric: tabular-nums;
}

/* ============================================
   SECTIONS (homepage)
   ============================================ */
.section {
  margin: clamp(var(--space-12), 6vw, var(--space-20)) 0;
  padding-top: clamp(var(--space-8), 4vw, var(--space-12));
  border-top: 1px solid var(--border-light);
}
.section h2 {
  font-family: var(--font-display);
  font-size: var(--text-xl);
  font-weight: 400;
  margin-bottom: var(--space-4);
  letter-spacing: -0.01em;
}
.section p {
  font-size: var(--text-base);
  color: var(--text-2);
  line-height: 1.8;
  margin-bottom: var(--space-4);
  max-width: 72ch;
}
.section p:last-child { margin-bottom: 0; }
.section strong { color: var(--text); font-weight: 600; }

/* ============================================
   SCORECARD
   ============================================ */
.scorecard { margin: clamp(var(--space-12), 6vw, var(--space-20)) 0; }
.scorecard h2 {
  font-family: var(--font-display);
  font-size: var(--text-xl);
  font-weight: 400;
  margin-bottom: var(--space-2);
}
.scorecard-meta {
  font-size: var(--text-xs);
  color: var(--text-3);
  margin-bottom: var(--space-6);
  font-family: var(--font-mono);
  font-variant-numeric: tabular-nums;
}

.sc-item {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--space-5) var(--space-6);
  margin-bottom: var(--space-3);
  transition: background .3s var(--ease);
}
.sc-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--space-4);
  margin-bottom: var(--space-2);
}
.sc-id {
  font-family: var(--font-mono);
  font-size: 0.6875rem;
  font-weight: 600;
  color: var(--accent);
  background: var(--accent-light);
  padding: 2px var(--space-2);
  border-radius: 4px;
  flex-shrink: 0;
}
.sc-name {
  font-weight: 600;
  font-size: var(--text-base);
  flex: 1;
}
.sc-score {
  font-family: var(--font-mono);
  font-size: var(--text-lg);
  font-weight: 700;
  flex-shrink: 0;
  min-width: 52px;
  text-align: right;
  font-variant-numeric: tabular-nums;
}
.sc-score.high { color: var(--teal); }
.sc-score.mid { color: var(--warm); }
.sc-score.low { color: var(--coral); }

.sc-bar {
  height: 6px;
  border-radius: 3px;
  background: var(--border-light);
  margin: var(--space-3) 0;
  overflow: hidden;
}
.sc-bar-fill {
  height: 100%;
  border-radius: 3px;
  transition: width .8s var(--ease);
  position: relative;
}

.sc-desc {
  font-size: var(--text-sm);
  color: var(--text-2);
  margin-bottom: var(--space-2);
  max-width: 72ch;
}
.sc-evidence {
  font-size: var(--text-xs);
  color: var(--text-3);
  line-height: 1.7;
  max-width: 72ch;
}
.sc-evidence strong { color: var(--text-2); font-weight: 500; }

/* ============================================
   PUBLICATIONS
   ============================================ */
.pub-list { margin-top: var(--space-4); }
.pub-item {
  padding: var(--space-5) 0;
  border-bottom: 1px solid var(--border-light);
}
.pub-item:last-child { border-bottom: none; }

.pub-tag {
  display: inline-block;
  font-size: 0.6875rem;
  font-weight: 600;
  padding: 2px var(--space-3);
  border-radius: 5px;
  margin-bottom: var(--space-2);
  text-transform: uppercase;
  letter-spacing: 0.04em;
}
.pub-tag.review { background: var(--accent-light); color: var(--accent); }
.pub-tag.preprint { background: var(--teal-light); color: var(--teal); }
.pub-tag.dataset { background: var(--warm-light); color: var(--warm); }
.pub-tag.software { background: var(--coral-light); color: var(--coral); }

.pub-title {
  font-family: var(--font-display);
  font-size: var(--text-base);
  font-weight: 400;
  line-height: 1.4;
  margin-bottom: var(--space-1);
}
.pub-meta {
  font-size: var(--text-xs);
  color: var(--text-3);
  margin-bottom: var(--space-2);
  font-family: var(--font-mono);
}
.pub-links {
  display: flex;
  gap: var(--space-2);
  flex-wrap: wrap;
}
.pub-links a {
  font-size: var(--text-xs);
  font-family: var(--font-mono);
  padding: var(--space-1) var(--space-3);
  border: 1px solid var(--border);
  border-radius: 6px;
  transition: all var(--transition-fast);
  color: var(--text-2);
}
.pub-links a:hover {
  background: var(--accent-light);
  border-color: var(--accent);
  color: var(--accent);
}

/* ============================================
   PI / CONTACT
   ============================================ */
.pi-box {
  display: flex;
  gap: var(--space-6);
  align-items: flex-start;
  margin-top: var(--space-4);
}
.pi-info h3 {
  font-family: var(--font-display);
  font-size: var(--text-lg);
  font-weight: 400;
  margin-bottom: 2px;
}
.pi-role {
  font-size: var(--text-sm);
  color: var(--text-3);
  margin-bottom: var(--space-2);
}
.pi-bio {
  font-size: var(--text-sm);
  color: var(--text-2);
  line-height: 1.8;
  max-width: 65ch;
}
.contact-row {
  display: flex;
  gap: var(--space-8);
  flex-wrap: wrap;
  margin-top: var(--space-4);
  font-size: var(--text-sm);
}
.contact-row .label {
  font-size: var(--text-xs);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-3);
  margin-bottom: 2px;
  font-weight: 600;
}

.disclaimer {
  margin-top: var(--space-6);
  padding: var(--space-5) var(--space-6);
  background: var(--surface);
  border: 1px solid var(--border);
  border-left: 3px solid var(--accent);
  border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
  font-size: var(--text-sm);
  color: var(--text-2);
  line-height: 1.7;
  max-width: 72ch;
}

/* ============================================
   BADGE (mouse page)
   ============================================ */
.badge {
  display: inline-block;
  background: var(--warm);
  color: #fff;
  font-size: 0.6875rem;
  font-weight: 700;
  padding: 3px var(--space-3);
  border-radius: 6px;
  margin-bottom: var(--space-4);
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

/* ============================================
   FOOTER
   ============================================ */
.site-footer {
  padding: clamp(var(--space-8), 4vw, var(--space-12)) 0;
  border-top: 1px solid var(--border-light);
  margin-top: clamp(var(--space-12), 6vw, var(--space-16));
}
.footer-inner {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  flex-wrap: wrap;
  gap: var(--space-8);
}
.footer-brand {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}
.footer-brand-name {
  font-family: var(--font-display);
  font-size: var(--text-lg);
  color: var(--text);
  font-weight: 400;
}
.footer-brand-sub {
  font-size: var(--text-xs);
  color: var(--text-3);
  max-width: 300px;
  line-height: 1.6;
}
.footer-links {
  display: flex;
  gap: clamp(var(--space-8), 4vw, var(--space-12));
}
.footer-col h4 {
  font-size: var(--text-xs);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-3);
  margin-bottom: var(--space-3);
}
.footer-col a {
  display: block;
  font-size: var(--text-sm);
  color: var(--text-2);
  margin-bottom: var(--space-2);
  transition: color var(--transition-fast);
}
.footer-col a:hover { color: var(--text); }

.footer-bottom {
  margin-top: var(--space-8);
  padding-top: var(--space-6);
  border-top: 1px solid var(--border-light);
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: var(--text-xs);
  color: var(--text-3);
}
.footer-bottom a {
  color: var(--text-3);
  font-weight: 500;
}

/* ============================================
   SCROLL REVEAL (CSS only, opacity + clip-path)
   ============================================ */
.reveal {
  opacity: 1; /* fallback: visible */
}

@supports (animation-timeline: view()) {
  .reveal {
    opacity: 0;
    animation: reveal-fade linear both;
    animation-timeline: view();
    animation-range: entry 0% entry 35%;
  }
}

@keyframes reveal-fade {
  to { opacity: 1; }
}

/* ============================================
   RESPONSIVE
   ============================================ */
@media (max-width: 768px) {
  .hero h1 { font-size: var(--text-2xl); }
  .stat-grid { grid-template-columns: 1fr; }
  .charts-row { grid-template-columns: 1fr; }
  .controls { flex-direction: column; gap: var(--space-3); }
  .card-grid { grid-template-columns: 1fr; }
  .footer-inner { flex-direction: column; }
  .footer-links { flex-direction: column; gap: var(--space-6); }
  .footer-bottom { flex-direction: column; gap: var(--space-2); text-align: center; }
  .pi-box { flex-direction: column; }
  .contact-row { flex-direction: column; gap: var(--space-4); }
  .nav-right { gap: var(--space-3); }
}

@media (max-width: 480px) {
  .hero h1 { font-size: clamp(1.75rem, 5vw, 2.25rem); }
  .tabs { width: 100%; overflow-x: auto; }
  .tab-btn { padding: var(--space-2) var(--space-4); white-space: nowrap; }
}
