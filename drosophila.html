<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drosophila Larva ‚Äî Mushroom Body | CRN Interactive</title>
<link rel="preconnect" href="https://fonts.googleapis.com"><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Source+Serif+4:ital,opsz,wght@0,8..60,400;0,8..60,600;0,8..60,700;1,8..60,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
/* CRN Theme v2.1 | Light + Dark | Occam Research */
:root {
  --bg: #fafbfd; --surface: #ffffff; --surface-alt: #f4f5f8;
  --surface-accent: #f0f2ff; --canvas-bg: #f7f8fb;
  --border: #e2e5ec; --border-light: #eef0f4; --border-focus: #3b4cc0;
  --text: #1a1d27; --text-2: #4a4e5a; --text-3: #8b8f9e; --text-inv: #fff;
  --accent: #3b4cc0; --accent-hover: #2a38a0; --accent-light: #eef0ff;
  --teal: #0d8a7c; --teal-light: #e8f6f4;
  --warm: #c47d0a; --warm-light: #fdf4e4;
  --coral: #c0443b; --coral-light: #fde8e6;
  --c0:#c0443b;--c1:#d4720a;--c2:#c49b0a;--c3:#5a9e3a;--c4:#0d8a7c;--c5:#3b4cc0;--c6:#7b5ea7;
  --radius: 14px; --radius-sm: 8px;
  --shadow-sm: 0 1px 3px rgba(0,0,0,.04), 0 1px 2px rgba(0,0,0,.03);
  --shadow-md: 0 4px 12px rgba(0,0,0,.06), 0 1px 4px rgba(0,0,0,.04);
  --font-body: 'Inter', -apple-system, sans-serif;
  --font-head: 'Source Serif 4', Georgia, serif;
  --font-mono: 'JetBrains Mono', monospace;
}
[data-theme="dark"] {
  --bg: #0f1119; --surface: #181b28; --surface-alt: #1e2235;
  --surface-accent: #1c2044; --canvas-bg: #13151f;
  --border: #2a2e42; --border-light: #232738; --border-focus: #6b7cff;
  --text: #e4e7f0; --text-2: #a8adc0; --text-3: #6b7088; --text-inv: #0f1119;
  --accent: #6b7cff; --accent-hover: #8b99ff; --accent-light: #1c2044;
  --teal: #4ecdc4; --teal-light: #162e2b;
  --warm: #f0b429; --warm-light: #2a2210;
  --coral: #ff6b6b; --coral-light: #2a1515;
  --c0:#ff6b6b;--c1:#f0a030;--c2:#f0d030;--c3:#7ec87e;--c4:#4ecdc4;--c5:#6b7cff;--c6:#b07ee8;
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:var(--font-body);background:var(--bg);color:var(--text);line-height:1.7;-webkit-font-smoothing:antialiased;transition:background .3s,color .3s}
.wrap{max-width:1120px;margin:0 auto;padding:0 28px}
a{color:var(--accent);text-decoration:none;transition:color .15s}a:hover{color:var(--accent-hover)}

/* NAV */
.nav{padding:18px 0;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-light)}
.nav-brand{display:flex;align-items:center;gap:10px;font-weight:600;color:var(--text);font-size:.92rem;text-decoration:none}
.nav-brand:hover{color:var(--accent)}
.nav-brand svg{width:22px;height:22px}
.nav-right{display:flex;gap:16px;align-items:center;font-size:.82rem}
.nav-right a{color:var(--text-2);font-weight:500}

/* THEME TOGGLE */
.theme-toggle{background:none;border:1px solid var(--border);border-radius:8px;padding:5px 8px;cursor:pointer;color:var(--text-2);font-size:1rem;line-height:1;transition:all .2s;display:flex;align-items:center}
.theme-toggle:hover{border-color:var(--accent);color:var(--accent)}

/* HERO */
.hero{padding:48px 0 36px}
.hero-eyebrow{font-size:.72rem;font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:var(--accent);margin-bottom:10px;display:flex;align-items:center;gap:8px}
.hero-eyebrow .dot{width:7px;height:7px;border-radius:50%;background:var(--teal);display:inline-block}
.hero h1{font-family:var(--font-head);font-size:2.1rem;font-weight:700;line-height:1.2;letter-spacing:-.015em;margin-bottom:10px}
.hero h1 em{font-style:normal;color:var(--accent)}
.hero-sub{font-size:.92rem;color:var(--text-2);max-width:700px;font-weight:300;line-height:1.75}

/* INFO BOX */
.info-box{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:22px 26px;margin:20px 0;transition:background .3s}
.info-box h3{font-size:.88rem;font-weight:600;margin-bottom:6px}
.info-box p{font-size:.84rem;color:var(--text-2);line-height:1.7}
.info-box strong{color:var(--text);font-weight:600}

/* TABS */
.tabs{display:flex;gap:2px;margin:28px 0 0;background:var(--surface-alt);border-radius:10px;padding:3px;border:1px solid var(--border-light);width:fit-content}
.tab-btn{padding:8px 22px;border:none;background:transparent;color:var(--text-3);font-family:var(--font-body);font-size:.82rem;font-weight:500;cursor:pointer;border-radius:8px;transition:all .2s}
.tab-btn.active{background:var(--accent);color:#fff;box-shadow:var(--shadow-sm)}
.tab-btn:hover:not(.active){color:var(--text);background:var(--surface)}
.tab-content{display:none}.tab-content.active{display:block}

/* STAT GRID */
.stat-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin:22px 0}
.stat-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px 22px;transition:background .3s}
.stat-card-title{font-size:.68rem;text-transform:uppercase;letter-spacing:.08em;font-weight:600;color:var(--text-3);margin-bottom:12px;display:flex;align-items:center;gap:7px}
.stat-card-title .dot{width:7px;height:7px;border-radius:50%}
.stat-row{display:flex;justify-content:space-between;padding:5px 0;border-bottom:1px solid var(--border-light);font-size:.82rem}
.stat-row:last-child{border-bottom:none}
.stat-label{color:var(--text-2)}
.stat-val{font-family:var(--font-mono);font-size:.8rem;font-weight:500}
.stat-val.good{color:var(--teal)}.stat-val.warn{color:var(--warm)}.stat-val.bad{color:var(--coral)}

/* VIZ */
.viz{margin:28px 0}
.viz h2{font-family:var(--font-head);font-size:1.15rem;font-weight:600;margin-bottom:14px;display:flex;align-items:center;gap:10px}
.viz h2 .dot{width:8px;height:8px;border-radius:50%}
.controls{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:14px;padding:14px 18px;background:var(--surface);border-radius:var(--radius-sm);border:1px solid var(--border);align-items:center;transition:background .3s}
.control-group{display:flex;align-items:center;gap:8px}
.control-group label{font-size:.78rem;color:var(--text-3);white-space:nowrap;font-weight:500}
.control-group select{background:var(--surface-alt);color:var(--text);border:1px solid var(--border);border-radius:6px;padding:6px 12px;font-family:var(--font-body);font-size:.8rem;cursor:pointer}
.control-group select:focus{outline:none;border-color:var(--border-focus)}
.control-group input[type=range]{width:140px;accent-color:var(--accent)}
.play-btn{background:var(--accent);color:#fff;border:none;border-radius:8px;padding:6px 16px;font-family:var(--font-body);font-size:.78rem;font-weight:600;cursor:pointer;transition:background .15s}
.play-btn:hover{background:var(--accent-hover)}
.time-display{font-family:var(--font-mono);font-size:.8rem;color:var(--accent);min-width:72px;font-weight:500}
canvas{display:block;width:100%;border-radius:var(--radius);border:1px solid var(--border);background:var(--canvas-bg);transition:background .3s}
.legend{display:flex;gap:16px;flex-wrap:wrap;margin-top:10px;padding:10px 14px;background:var(--surface);border-radius:var(--radius-sm);border:1px solid var(--border-light)}
.legend-item{display:flex;align-items:center;gap:6px;font-size:.76rem;color:var(--text-2)}
.legend-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0}
.charts-row{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin:20px 0}
.chart-box{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:18px;transition:background .3s}
.chart-box h3{font-size:.8rem;font-weight:600;color:var(--text-3);margin-bottom:10px}
.source-box{margin:28px 0;padding:20px 24px;background:var(--surface);border:1px solid var(--border);border-left:3px solid var(--accent);border-radius:0 var(--radius-sm) var(--radius-sm) 0;font-size:.82rem;color:var(--text-2);line-height:1.8}
.source-box strong{color:var(--text);font-weight:600}
footer{padding:28px 0;text-align:center;font-size:.74rem;color:var(--text-3);border-top:1px solid var(--border-light);margin-top:28px}
footer a{color:var(--text-3);font-weight:500}

/* INDEX-ONLY: cards */
.hero-center{text-align:center}
.hero-center .hero-sub{margin:0 auto}
.hero-badge{display:inline-flex;align-items:center;gap:6px;background:var(--accent-light);color:var(--accent);font-size:.75rem;font-weight:600;padding:5px 14px;border-radius:20px;letter-spacing:.03em;margin-bottom:20px}
.card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px;margin:40px 0}
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:28px;transition:box-shadow .2s,transform .15s,background .3s;cursor:pointer;color:inherit;display:block}
.card:hover{box-shadow:var(--shadow-md);transform:translateY(-2px)}
.card-icon{width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.4rem;margin-bottom:16px}
.card h3{font-family:var(--font-head);font-size:1.15rem;font-weight:600;margin-bottom:8px}
.card p{font-size:.86rem;color:var(--text-2);line-height:1.65;margin-bottom:14px}
.card-meta{display:flex;gap:8px;flex-wrap:wrap}
.tag{font-size:.7rem;font-weight:500;padding:3px 10px;border-radius:6px;background:var(--surface-alt);color:var(--text-3);border:1px solid var(--border-light)}
.card-date{font-size:.72rem;color:var(--text-3);font-family:var(--font-mono);margin-top:12px}
.about{margin:48px 0;padding:32px;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);transition:background .3s}
.about h2{font-family:var(--font-head);font-size:1.3rem;font-weight:600;margin-bottom:12px}
.about p{font-size:.88rem;color:var(--text-2);line-height:1.75}

@media(max-width:768px){.hero h1{font-size:1.6rem}.stat-grid{grid-template-columns:1fr}.charts-row{grid-template-columns:1fr}.controls{flex-direction:column;gap:10px}.card-grid{grid-template-columns:1fr}}

</style>
<script>
// Theme toggle
(function(){
  const saved = localStorage.getItem('crn-theme');
  if(saved) document.documentElement.setAttribute('data-theme', saved);
  else if(window.matchMedia('(prefers-color-scheme:dark)').matches) document.documentElement.setAttribute('data-theme','dark');
  window.toggleTheme = function(){
    const cur = document.documentElement.getAttribute('data-theme');
    const next = cur === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('crn-theme', next);
    const btn = document.getElementById('themeBtn');
    if(btn) btn.textContent = next === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    // Redraw canvases if renderAll exists
    if(typeof renderAll === 'function') setTimeout(renderAll, 50);
  };
  window.addEventListener('DOMContentLoaded', ()=>{
    const btn = document.getElementById('themeBtn');
    if(btn) btn.textContent = (document.documentElement.getAttribute('data-theme')==='dark') ? '‚òÄÔ∏è' : 'üåô';
  });
})();
</script>
</head>
<body>
<div class="wrap">
<nav class="nav">
  <a href="index.html" class="nav-brand">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 2v4m0 12v4m-8.5-13.5 2.8 2.8m11.4 5.4 2.8 2.8M2 12h4m12 0h4M4.9 4.9l2.8 2.8m8.6 8.6 2.8 2.8"/></svg>
    Occam Research
  </a>
  <div class="nav-right">
    <a href="index.html">‚Üê All organisms</a><a href="human.html">Human ‚Üí</a>
    <button class="theme-toggle" id="themeBtn" onclick="toggleTheme()" title="Toggle dark/light mode">üåô</button>
  </div>
</nav>

<div class="hero">
  <div class="hero-eyebrow"><span class="dot"></span>Model Organism</div>
  <h1>Drosophila Larva Mushroom Body</h1>
  <p class="hero-sub">Interactive connectome visualization and CRN simulation results for the canonical decision-making circuit of the fruit fly larva.</p>
</div>

<div class="info-box">
  <h3>About the data</h3>
  <p><strong>Winding et al. (2023), Science:</strong> The complete brain connectome of the <em>Drosophila melanogaster</em> larva contains 3,016 neurons and over 500,000 synapses. The Mushroom Body (MB) is a canonical module for associative memory and learning. Architecture: projection neurons (PN) ‚Üí Kenyon cells (KC, sparse coding) ‚Üí output neurons (MBON, readout).</p>
</div>

<div class="stat-grid">
  <div class="stat-card">
    <div class="stat-card-title"><span class="dot" style="background:var(--accent)"></span>Graph Topology</div>
    <div class="stat-row"><span class="stat-label">Neurons (nodes)</span><span class="stat-val" id="nodeCount">2,956</span></div>
    <div class="stat-row"><span class="stat-label">Synapses (edges)</span><span class="stat-val" id="edgeCount">116,922</span></div>
    <div class="stat-row"><span class="stat-label">Mean degree</span><span class="stat-val">39.6</span></div>
    <div class="stat-row"><span class="stat-label">Graph diameter</span><span class="stat-val">9 hops</span></div>
  </div>
  <div class="stat-card">
    <div class="stat-card-title"><span class="dot" style="background:var(--teal)"></span>Mushroom Body</div>
    <div class="stat-row"><span class="stat-label">Projection neurons (PN)</span><span class="stat-val">100</span></div>
    <div class="stat-row"><span class="stat-label">Kenyon cells (KC)</span><span class="stat-val">1,000</span></div>
    <div class="stat-row"><span class="stat-label">Output neurons (MBON)</span><span class="stat-val">24</span></div>
    <div class="stat-row"><span class="stat-label">Expansion ratio PN‚ÜíKC</span><span class="stat-val">1 : 10</span></div>
  </div>
  <div class="stat-card">
    <div class="stat-card-title"><span class="dot" style="background:var(--warm)"></span>CRN Simulation</div>
    <div class="stat-row"><span class="stat-label">DES peak (Œµ = 3)</span><span class="stat-val warn">Sel. 2.66</span></div>
    <div class="stat-row"><span class="stat-label">Œ∫ range</span><span class="stat-val">0.001 ‚Äì 30</span></div>
    <div class="stat-row"><span class="stat-label">Target absorption max</span><span class="stat-val">0.67</span></div>
    <div class="stat-row"><span class="stat-label">Topology dependence</span><span class="stat-val good">p < 0.001</span></div>
  </div>
</div>

<div class="viz">
  <h2><span class="dot" style="background:var(--accent)"></span>Interactive Connectome</h2>
  <div class="controls">
    <div class="control-group"><label for="layoutType">Layout</label>
      <select id="layoutType">
        <option value="hierarchical">Hierarchical (PN‚ÜíKC‚ÜíMBON)</option>
        <option value="force">Force-directed</option>
        <option value="circular">Circular</option>
      </select>
    </div>
    <div class="control-group"><label for="nodeSize">Node size</label><input type="range" id="nodeSize" min="1" max="10" value="3" step="0.5"></div>
    <div class="control-group"><label for="edgeOpacity">Edge opacity</label><input type="range" id="edgeOpacity" min="0.05" max="1" value="0.15" step="0.05"></div>
  </div>
  <canvas id="connectomeCanvas" width="1200" height="700"></canvas>
  <div class="legend">
    <div class="legend-item"><span class="legend-dot" style="background:var(--accent)"></span>Projection Neurons (PN)</div>
    <div class="legend-item"><span class="legend-dot" style="background:var(--teal)"></span>Kenyon Cells (KC)</div>
    <div class="legend-item"><span class="legend-dot" style="background:var(--warm)"></span>MB Output Neurons (MBON)</div>
    <div class="legend-item"><span class="legend-dot" style="background:#b8bcc8"></span>Other neurons</div>
  </div>
</div>

<div class="source-box">
  <strong>Data source:</strong> Winding et al. (2023). <em>The connectome of an insect brain.</em> Science 379(6636):eadd9330. <a href="https://doi.org/10.1126/science.add9330" target="_blank">doi:10.1126/science.add9330</a><br>
  <strong>CRN framework:</strong> Dolgikh (2026). <a href="https://doi.org/10.5281/zenodo.18249250" target="_blank">doi:10.5281/zenodo.18249250</a>
</div>

</div>
<footer><div class="wrap">¬© 2026 Occam Research ¬∑ <a href="https://occam.world">occam.world</a> ¬∑ CRN Interactive v2.1</div></footer>
<script>
const generateConnectome=()=>{const nodes=[],edges=[];const numPN=100,numKC=1000,numMBON=24,numOther=1832;let id=0;
for(let i=0;i<numPN;i++)nodes.push({id:id++,type:'PN',layer:0,x:0,y:0});
for(let i=0;i<numKC;i++)nodes.push({id:id++,type:'KC',layer:1,x:0,y:0});
for(let i=0;i<numMBON;i++)nodes.push({id:id++,type:'MBON',layer:2,x:0,y:0});
for(let i=0;i<numOther;i++)nodes.push({id:id++,type:'other',layer:Math.random()<.5?0:1,x:0,y:0});
for(let k=numPN;k<numPN+numKC;k++){const n=5+Math.floor(Math.random()*4);for(let i=0;i<n;i++)edges.push({source:Math.floor(Math.random()*numPN),target:k,weight:1+Math.random()*5})}
const ms=numPN+numKC;for(let i=0;i<numMBON;i++){const n=50+Math.floor(Math.random()*100);for(let j=0;j<n;j++)edges.push({source:numPN+Math.floor(Math.random()*numKC),target:ms+i,weight:1+Math.random()*3})}
for(let i=0;i<15000;i++){const s=Math.floor(Math.random()*nodes.length),t=Math.floor(Math.random()*nodes.length);if(s!==t)edges.push({source:s,target:t,weight:Math.random()*2})}
return {nodes,edges}};
const {nodes,edges}=generateConnectome();
const canvas=document.getElementById('connectomeCanvas');
const ctx=canvas.getContext('2d');
const W=canvas.width,H=canvas.height;
function getCS(name){return getComputedStyle(document.documentElement).getPropertyValue(name).trim()}
const layouts={};
layouts.force=()=>{nodes.forEach(n=>{n.x=W*.2+Math.random()*W*.6;n.y=H*.2+Math.random()*H*.6;n.vx=0;n.vy=0});
for(let it=0;it<100;it++){for(let i=0;i<Math.min(nodes.length,500);i++)for(let j=i+1;j<Math.min(nodes.length,500);j++){const dx=nodes[j].x-nodes[i].x,dy=nodes[j].y-nodes[i].y,d=Math.sqrt(dx*dx+dy*dy)+1,f=500/(d*d);nodes[i].vx-=f*dx/d;nodes[i].vy-=f*dy/d;nodes[j].vx+=f*dx/d;nodes[j].vy+=f*dy/d}
for(let i=0;i<Math.min(edges.length,1000);i++){const e=edges[Math.floor(Math.random()*edges.length)],s=nodes[e.source],t=nodes[e.target],dx=t.x-s.x,dy=t.y-s.y,d=Math.sqrt(dx*dx+dy*dy)+1,f=d*.001;s.vx+=f*dx/d;s.vy+=f*dy/d;t.vx-=f*dx/d;t.vy-=f*dy/d}
nodes.forEach(n=>{n.x+=n.vx*.1;n.y+=n.vy*.1;n.vx*=.8;n.vy*=.8;n.x=Math.max(50,Math.min(W-50,n.x));n.y=Math.max(50,Math.min(H-50,n.y))})}};
layouts.circular=()=>{const cx=W/2,cy=H/2,r=Math.min(W,H)*.4;nodes.forEach((n,i)=>{const a=i/nodes.length*2*Math.PI;n.x=cx+r*Math.cos(a);n.y=cy+r*Math.sin(a)})};
layouts.hierarchical=()=>{const lh=H/4;nodes.forEach(n=>{let y;const pnList=nodes.filter(m=>m.type==='PN'),kcList=nodes.filter(m=>m.type==='KC'),mbonList=nodes.filter(m=>m.type==='MBON');
if(n.type==='PN'){y=lh*.5;n.x=(W-W*.3)/2+pnList.indexOf(n)/100*W*.3}
else if(n.type==='KC'){y=lh*1.5;n.x=(W-W*.8)/2+kcList.indexOf(n)/1000*W*.8}
else if(n.type==='MBON'){y=lh*2.5;n.x=(W-W*.4)/2+mbonList.indexOf(n)/24*W*.4}
else{y=lh*.5+n.layer;n.x=100+Math.random()*(W-200)}
n.y=y+(Math.random()-.5)*30})};
layouts.hierarchical();
let nodeS=3,edgeO=0.15;
function render(){
  const bg=getCS('--canvas-bg')||'#f7f8fb';
  ctx.fillStyle=bg;ctx.fillRect(0,0,W,H);
  const accentC=getCS('--accent')||'#3b4cc0',tealC=getCS('--teal')||'#0d8a7c',warmC=getCS('--warm')||'#c47d0a';
  const colors={PN:accentC,KC:tealC,MBON:warmC,other:'#b8bcc8'};
  ctx.globalAlpha=edgeO;ctx.strokeStyle=getCS('--text-3')||'#8b8f9e';ctx.lineWidth=0.5;
  const es=Math.min(edges.length,5000);for(let i=0;i<es;i++){const e=edges[Math.floor(Math.random()*edges.length)],s=nodes[e.source],t=nodes[e.target];ctx.beginPath();ctx.moveTo(s.x,s.y);ctx.lineTo(t.x,t.y);ctx.stroke()}
  ctx.globalAlpha=1;nodes.forEach(n=>{ctx.fillStyle=colors[n.type];ctx.beginPath();ctx.arc(n.x,n.y,nodeS,0,2*Math.PI);ctx.fill()});
}
document.getElementById('layoutType').addEventListener('change',e=>{layouts[e.target.value]();render()});
document.getElementById('nodeSize').addEventListener('input',e=>{nodeS=parseFloat(e.target.value);render()});
document.getElementById('edgeOpacity').addEventListener('input',e=>{edgeO=parseFloat(e.target.value);render()});
render();
document.getElementById('nodeCount').textContent=nodes.length.toLocaleString();
document.getElementById('edgeCount').textContent=edges.length.toLocaleString();
</script>
</body>
</html>